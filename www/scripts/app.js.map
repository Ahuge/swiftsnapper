{"version":3,"file":"app.js","sourceRoot":"","sources":["../../scripts/SC/snapchat.agent.ts","../../scripts/SC/snapchat.ts","../../scripts/index.ts"],"names":["SnapchatAgent","SnapchatAgent.constructor","SnapchatAgent.GenerateTimeStamp","SnapchatAgent.GenerateRequestToken","SnapchatAgent.GetDeviceToken","Snapchat","Snapchat.constructor","swiftsnapper","swiftsnapper.CameraManager","swiftsnapper.CameraManager.initialize","swiftsnapper.CameraManager.takePhoto","swiftsnapper.Application","swiftsnapper.Application.initialize","swiftsnapper.Application.onDeviceReady","swiftsnapper.Application.onPause","swiftsnapper.Application.onResume"],"mappings":"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","sourcesContent":["declare var sha256: any;\r\n\r\nclass SnapchatAgent {\r\n    private USER_AGENT = 'Snapchat/9.15.1.0 (iPad2,1; iOS 8.1; gzip)';\r\n    private ENDPOINT = 'https://feelinsonice-hrd.appspot.com';\r\n    private HASH_PATTERN = '0001110111101110001111010101111011010001001110011000110001000110';\r\n    private APP_SECRET = 'iEk21fuwZApXlz93750dmW22pw389dPwOk';\r\n    private APP_STATIC_TOKEN = 'm198sOkJEn37DjqZ32lpRu76xmw288xSQ9';\r\n    private BLOB_ENCRYPTION_KEY = 'M02cnQ51Ji97vwT4';\r\n\r\n    /*\r\n        Generates a UNIX timestamp\r\n    */\r\n    public GenerateTimeStamp() {\r\n        return Math.round((new Date).getTime());\r\n    }\r\n\r\n    /*\r\n        Generates req_token\r\n        based on https://github.com/cuonic/SnapchatDevWiki/wiki/Generating-the-req_token\r\n    */\r\n    public GenerateRequestToken(token, timestamp) {\r\n        let hash1: string = sha256(this.APP_SECRET + token);\r\n        let hash2: string = sha256(timestamp.toString() + this.APP_SECRET);\r\n\r\n        let res = '';\r\n        for (var n = 0; n < this.HASH_PATTERN.length; n++) {\r\n            if (parseInt(this.HASH_PATTERN.substr(n, 1))) {\r\n                res += hash2[n];\r\n            } else {\r\n                res += hash1[n];\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    /*\r\n        TODO: Get this mess to work\r\n        Currently returns 401 UNAUTHORIZED\r\n    */\r\n    public GetDeviceToken() {\r\n        const TS = this.GenerateTimeStamp();\r\n\r\n        let http = new XMLHttpRequest(),\r\n            URI = this.ENDPOINT + '/loq/device_id';\r\n\r\n        http.open('POST', URI, false);\r\n        \r\n        http.setRequestHeader('User-Agent', this.USER_AGENT);\r\n        http.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n        http.setRequestHeader('Accept-Language', 'en');\r\n        http.setRequestHeader('Accept-Locale', 'en_US');\r\n        http.setRequestHeader('Accept-Encoding', 'gzip');\r\n        http.setRequestHeader('X-Snapchat-Client-Auth-Token', 'Bearer ');\r\n        http.setRequestHeader('X-Snapchat-Client-Auth', '');\r\n        http.setRequestHeader('Authorization', 'Bearer ');\r\n\r\n        var self = this;\r\n        window.navigator['__defineGetter__']('userAgent', function () {\r\n            return self.USER_AGENT;\r\n        });\r\n        http.send({\r\n            'timestamp': TS,\r\n            'req_token': this.GenerateRequestToken(this.APP_STATIC_TOKEN, TS)\r\n        });\r\n\r\n        return http.responseText;\r\n    }\r\n}","/// <reference path=\"snapchat.agent.ts\" />\r\n\r\nclass Snapchat {\r\n    private SnapchatAgent: SnapchatAgent;\r\n\r\n    constructor() {\r\n        this.SnapchatAgent = new SnapchatAgent();\r\n        console.log(this.SnapchatAgent.GetDeviceToken());\r\n    }\r\n}","/// <reference path=\"SC/snapchat.ts\" />\r\n/// <reference path=\"typings/winrt/winrt.d.ts\" />\r\n/// <reference path=\"typings/jquery/jquery.d.ts\" />\r\nvar views\r\ndeclare var Handlebars: any;\r\n\r\nmodule swiftsnapper {\r\n    \"use strict\";\r\n\r\n    export module CameraManager {\r\n        var video;\r\n        var mediaStream;\r\n\r\n        export function initialize(conf) {\r\n            video = document.getElementById('CameraPreview');\r\n            var Capture = Windows.Media.Capture;\r\n            var mediaCapture = new Capture.MediaCapture();\r\n            var mediaSettings = new Capture.MediaCaptureInitializationSettings();\r\n            mediaSettings.streamingCaptureMode = Windows.Media.Capture.StreamingCaptureMode.video;\r\n\r\n            Windows.Devices.Enumeration.DeviceInformation.findAllAsync(Windows.Devices.Enumeration.DeviceClass.videoCapture)\r\n                .done(function (devices) {\r\n                    if (devices.length > 0) {\r\n                        if (conf.frontFacing) {\r\n                            video.classList.add('FrontFacing');\r\n\r\n                            mediaSettings.videoDeviceId = devices[1].id;\r\n                        } else {\r\n                            video.classList.remove('FrontFacing');\r\n\r\n                            mediaSettings.videoDeviceId = devices[0].id;\r\n                        }\r\n\r\n                        mediaCapture.initializeAsync(mediaSettings).done(function () {\r\n                            video.src = URL.createObjectURL(mediaCapture);\r\n                            video.play();\r\n                        });\r\n                    } else {\r\n                        //No camera found\r\n                    }\r\n                });\r\n        }\r\n\r\n        export function takePhoto() {\r\n            //TODO\r\n        }\r\n    }\r\n\r\n    export module Application {\r\n        export function initialize() {\r\n            document.addEventListener('deviceready', onDeviceReady, false);\r\n\r\n            if (Windows !== null && typeof Windows !== 'undefined') {\r\n                //Set the status bar to the correct theme colour\r\n                var theme = {\r\n                    a: 255,\r\n                    r: 255,\r\n                    g: 252,\r\n                    b: 0\r\n                },\r\n\r\n                v = Windows.UI.ViewManagement.ApplicationView.getForCurrentView();\r\n                v.titleBar.inactiveBackgroundColor = theme;\r\n                v.titleBar.buttonInactiveBackgroundColor = theme;\r\n                v.titleBar.backgroundColor = theme;\r\n                v.titleBar.buttonBackgroundColor = theme;\r\n                v.titleBar.inactiveForegroundColor = Windows.UI.Colors.white;\r\n                v.titleBar['inactiveButtonForegroundColor'] = Windows.UI.Colors.white;\r\n                v.titleBar.buttonForegroundColor = Windows.UI.Colors.white;\r\n                v.titleBar.foregroundColor = Windows.UI.Colors.white;\r\n                v['setDesiredBoundsMode'](Windows.UI.ViewManagement['ApplicationViewBoundsMode'].useCoreWindow);\r\n            }\r\n\r\n            var SC = new Snapchat();\r\n        }\r\n\r\n        function onDeviceReady() {\r\n            // Handle the Cordova pause and resume events\r\n            document.addEventListener('pause', onPause, false);\r\n            document.addEventListener('resume', onResume, false);\r\n\r\n            CameraManager.initialize({\r\n                'frontFacing': false\r\n            });\r\n        }\r\n\r\n        function onPause() {\r\n            // TODO: This application has been suspended. Save application state here.\r\n        }\r\n\r\n        function onResume() {\r\n            CameraManager.initialize({\r\n                'frontFacing': false\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    window.onload = function () {\r\n        //TODO: Provide data from file\r\n        var lang = {\r\n            app: {\r\n                name: 'SwiftSnapper'\r\n            },\r\n            snaps: {\r\n                double_tap_to_reply: 'Double tap to reply',\r\n                day_ago: 'day ago',\r\n                days_ago: 'days ago',\r\n                just_now: 'just now',\r\n            },\r\n            stories: {\r\n                title: 'Stories',\r\n                discover: 'Discover',\r\n            }\r\n        };\r\n        var template = Handlebars.compile($(\"#template\").html());\r\n        $('#PageContent').html(template(lang));\r\n        Application.initialize();\r\n\r\n        //Init Owl Carousel\r\n        views = $('#views');\r\n        views.owlCarousel({\r\n            loop: false,\r\n            nav: false,\r\n            dots: false,\r\n            video: true,\r\n            margin: 0,\r\n            startPosition: 1,\r\n            pullDrag: false,\r\n            fallbackEasing: 'easeInOutQuart',\r\n            responsive: {\r\n                0: {\r\n                    items: 1\r\n                },\r\n                1024: {\r\n                    items: 3\r\n                }\r\n            }\r\n        });\r\n        $('#ViewSnapsBtn').on('click tap', function () {\r\n            views.trigger('prev.owl.carousel', [300]);\r\n        });\r\n        $('#ViewStoriesBtn').on('click tap', function () {\r\n            views.trigger('next.owl.carousel', [300]);\r\n        });\r\n\r\n        $('#CameraToggleBtn').on('click tap', function () {\r\n            if ($('#CameraPreview').hasClass('FrontFacing')) {\r\n                CameraManager.initialize({\r\n                    'frontFacing': false\r\n                });\r\n            } else {\r\n                CameraManager.initialize({\r\n                    'frontFacing': true\r\n                });\r\n            }\r\n            \r\n        });\r\n        $('#ShutterBtn').on('click tap', function () {\r\n            CameraManager.takePhoto();\r\n        });\r\n        if (Windows.Foundation.Metadata['ApiInformation'].isTypePresent('Windows.Phone.UI.Input.HardwareButtons')) {\r\n            Windows['Phone'].UI.Input.HardwareButtons.addEventListener('camerapressed', function (e) {\r\n                $('#ShutterBtn').click();\r\n            });\r\n        }\r\n    }\r\n}\r\n"]}